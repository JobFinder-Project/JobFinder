<head>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body data-empresa-id="{{empresaId}}">
    <nav class="navbar">
        <h1>JobFinder</h1>

        <ul class="navbar-menu">
            <li><a href="/logout">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                class="bi bi-box-arrow-right" viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                    d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0z" />
                <path fill-rule="evenodd"
                    d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z" />
            </svg>
            </a></li>
        </ul>
    </nav>

    <!-- Título e Formulário de Criação de Vaga -->
    <div class="form-container">
        <h1>Criar Nova Vaga</h1>
        <form action="/empresa/{{empresaId}}/vagas/criar" method="POST" enctype="multipart/form-data">
            <div>
                <label for="nome">Nome da Vaga:</label>
                <input type="text" id="nome" name="nome" required>
            </div>

            <div>
                <label for="area">Área *</label>
                <select id="area" name="area" required>
                    <option value="">Selecione</option>
                    <option value="Comercial/Vendas">Comercial/Vendas</option>
                    <option value="Administrativa">Administrativa</option>
                    <option value="Gastronomia">Gastronomia</option>
                    <option value="Logística">Logística</option>
                    <option value="Construção Civil">Construção Civil</option>
                    <option value="Industrial">Industrial</option>
                    <option value="Serviços Gerais">Serviços Gerais</option>
                    <option value="Finanças">Finanças</option>
                    <option value="Saúde">Saúde</option>
                    <option value="TI - Tecnologia da Informação">TI - Tecnologia da Informação</option>
                </select>
            </div>

            <div>
                <label for="requisitos">Requisitos *:</label>
                <textarea id="requisitos" name="requisitos" rows="4" required></textarea>
            </div>

            <div>
                <label for="imagem">Imagem da Vaga:</label>
                <input type="file" id="imagem" name="imagem" accept="image/*">
            </div>

            <button type="submit">Salvar Vaga</button>
        </form>

        <a href="/empresa/{{empresaId}}/vagas">Voltar para a Lista de Vagas</a>
    </div>

    <!-- Navegação inferior -->
<nav class="bottom-nav custom-nav">
    <a href="/empresa/dashboard" class="nav-btn">
        <div class="nav-icon">
            <svg width="36" height="36" fill="#1976d2"><path d="M3 12l9-9 9 9h-3v9h-12v-9h-3z"/></svg>
        </div>
        <span>Início</span>
    </a>
    <a href="/empresa/{{empresaId}}/vagas" class="nav-btn">
        <div class="nav-icon">
            <svg width="36" height="36" fill="#1976d2"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm1 15h-2v-2h2v2zm0-4h-2v-6h2v6z"/></svg>
        </div>
        <span>Vagas</span>
    </a>
    <a href="/empresa/{{empresaId}}/vagas/criar" class="nav-btn active">
        <div class="nav-icon">
            <svg width="36" height="36" fill="#1976d2"><path d="M19 13h-6v6h-2v-6h-6v-2h6v-6h2v6h6v2z"/></svg>
        </div>
        <span>Add Vagas</span>
    </a>
    <a href="#" class="nav-btn">
        <div class="nav-icon">
            <svg width="36" height="36" fill="#1976d2"><path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"/></svg>
        </div>
        <span>Perfil</span>
    </a>
</nav>

<style>
.custom-nav {
    display: flex;
    justify-content: center;
    align-items: center;
    background: #f5f7fa;
    padding: 24px 0 16px 0;
    border-radius: 32px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.07);
    margin: 32px auto 0 auto;
    max-width: 700px;
    gap: 40px;
}
.nav-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-decoration: none;
    color: #222;
    font-weight: 500;
    font-size: 1.15em;
    transition: background 0.2s, box-shadow 0.2s;
    padding: 22px 32px;
    border-radius: 28px;
    background: #e3f0ff;
    box-shadow: 0 2px 8px rgba(25,118,210,0.07);
}
.nav-btn:hover,
.nav-btn.active {
    background: #1976d2;
    color: #fff;
    box-shadow: 0 4px 16px rgba(25,118,210,0.12);
}
.nav-icon {
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
}
</style>
</body>

<script>
    // Obter o ID da empresa diretamente do atributo data no body
    const empresaId = document.body.getAttribute('data-empresa-id');

    // Verifica se a URL contém o parâmetro "success"
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('success') === 'true') {
        Swal.fire({
            icon: 'success',
            title: 'Sucesso!',
            text: 'Vaga criada com sucesso!',
            confirmButtonText: 'OK',
            timer: 3000 // Fecha automaticamente após 3 segundos
        }).then(() => {
            // Redireciona após o botão OK ser clicado
            window.location.href = `/empresa/${empresaId}/vagas`;
        });

        // Garantir redirecionamento mesmo se o tempo expirar
        const redirectTimeout = setTimeout(() => {
            window.location.href = `/empresa/${empresaId}/vagas`;
        }, 3000);

        // Cancelar timeout se o usuário interagir antes
        Swal.getConfirmButton().addEventListener('click', () => {
            clearTimeout(redirectTimeout);
        });
    }
</script>
